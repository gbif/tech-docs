= Importing GBIF data into ArcGIS

https://desktop.arcgis.com/[ArcGIS Desktop] is a desktop GIS application available on Windows.

GBIF occurrence data can be imported in at least three ways.

* <<import-a-download,Import a GBIF download>> when your GBIF query includes 20,000 or more occurrences
* <<plugin,Use the official ESRI plugin>> for some queries returning up to around 20,000 occurrences
* <<maps-api,Use the Maps API>> for visualization only, without any analysis of the data

GBIF basemaps can also <<basemaps,be imported>>.

[#import-a-download]
== Importing a GBIF download

. Download the desired occurrences in either _Simple_ or _Darwin Core Archive_ format.
. Unzip the downloaded file.
. Choose _Map_ → _XY Table To Point_
** For _Simple_ format, choose as _Input Table_ the unzipped file ending ".csv"
** For _Darwin Core Archive_ format, choose the unzipped file called "occurrence.txt"
** The _X Field_ and _Y Field_ should be filled in automatically with _decimalLongitude_ and _decimalLatitude_
. Click _Run_

image::importing-arcgis-desktop-download.png[]

[#plugin]
== Using the plugin

_The https://gbif.maps.arcgis.com/home/item.html?id=927944e867624504bfd6c489b0d2aec7[Download Species Occurrence Points (GBIF)] plugin is developed and maintained by ESRI._

. From the _Catalog_, choose _Portal_ → _ArcGIS Online_.
. Search for "GBIF" and select the _Download Species Occurrence Points (GBIF)_ toolbox.
** Right click it and _Add to Project_
** You may need to confirm you wish the toolbox code to run
+
image::importing-arcgis-desktop-plugin-install.png[]

. Return to the _Catalog_ and choose _Project_, then the GBIF toolbox.
+
image::importing-arcgis-desktop-plugin-open.png[]

. _Run_ the toolbox.
** Provide a scientific name, and select or draw a study area
** Optionally, choose to _Generate and register DOI_
** Click _Run_
+
image::importing-arcgis-desktop-plugin-use.png[]

The plugin is limited to retrieving 100,000 occurrence records, but numbers above around 50,000 will be slow to load.

[#maps-api]
== Visualizations with the Maps API

_The xref:v2@openapi::maps.adoc[Maps API] is designed for visualization, it is used for all the maps on GBIF.org and can be embedded on other websites.  It is of limited use for analysis, but can be useful for preparing customized maps._

. Refer to the xref:v2@openapi::maps.adoc[Maps API documentation] to find a suitable URL template, for example `https://api.gbif.org/v2/map/occurrence/density/{z}/{x}/{y}@1x.png?srs=EPSG:3857&taxonKey=6&bin=hex&hexPerTile=57&style=classic.poly` for all plants.
. Choose _Map_ → _Add Data From Path_
** Paste in the URL template.
. Click _Add_

[#basemaps]
== Using the GBIF basemaps

The https://tile.gbif.org/ui/[GBIF Basemaps] can also be added as a layer.

. Choose _Insert_ → _Server_ → _New WMTS Server_
** Und use `https://gbif.link/wmts-base` as the URL
** Click _OK_
. From the _Catalog_ (_Project_), Under _Servers_ add the base layer
. The style can be changed be right-clicking the layer and changing the property under _WMTS_.
